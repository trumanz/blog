# 协程在网络编程(linux c/c++)中的使用分析

[TOC]

## 什么是协程
协程，感觉这个概念好难解释清楚，看下linux 中的底层实现吧，
在linux 的man手册中 [makecontext](http://linux.die.net/man/3/makecontext)， 可以看到其中的例子，函数运行中可以切换给指定的函数，并且可以被切换回来后继续执行。这是因为swapcontex调用，将当前pc指针以及栈信息做了保存，并将pc指针以及栈信息切换到指定的contex继续执行，所以执行流会切换到另外一个函数。

这种contex切换是用户空间代码指定的，所以其切换调用完全由用户空间代码实现，这种切换比线程切换消耗更小。

这种协程切换机制可以简化一些单线程下的并发网络编程。下面将以这种机制作为介绍

## 事件驱动模型

现在大多数开源软件在网络中使用的仍然是事件驱动模型，这种模型易于理解，并且具有比较好的移植性。


## 协程模型
## 一个TCP server 的例子
### 同步模式
### 事件驱动下的异步模式
### 协程驱动下的异步模式
## 总结

